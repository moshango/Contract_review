# Web界面使用说明

## 访问地址

启动项目后,在浏览器中访问: **http://localhost:8080**

## 界面预览

### 主界面
- 渐变紫色背景,现代化设计
- 顶部显示系统标题和说明
- 两个功能选项卡:合同解析 和 合同批注
- 底部显示系统信息和API端点

## 功能说明

### 1. 合同解析功能

**步骤:**
1. 点击 "📁 选择合同文件" 按钮上传文件
   - 或直接拖拽文件到页面中
   - 支持 .docx 和 .doc 格式
2. 选择锚点模式:
   - 不生成锚点
   - 生成锚点 (推荐)
   - 重新生成锚点
3. 选择返回模式:
   - JSON结果 - 在页面显示解析JSON
   - 文档文件 - 下载带锚点的DOCX
   - JSON + 文档 - 下载文档(JSON通过API获取)
4. 点击 "🚀 开始解析" 按钮
5. 等待解析完成:
   - JSON模式: 结果显示在页面,可复制
   - 文件模式: 自动下载文档

**示例输出 (JSON模式):**
```json
{
  "filename": "合同.docx",
  "title": "技术合作协议",
  "clauses": [
    {
      "id": "c1",
      "heading": "第一条 合作范围",
      "text": "甲乙双方在以下范围内进行合作...",
      "anchorId": "anc-c1-4f21",
      "startParaIndex": 5,
      "endParaIndex": 9
    }
  ],
  "meta": {
    "wordCount": 5230,
    "paragraphCount": 140
  }
}
```

### 2. 合同批注功能

**步骤:**
1. 点击 "✍️ 合同批注" 选项卡
2. 上传原始合同文件 (.docx格式)
3. 在文本框中粘贴审查结果JSON:
   ```json
   {
     "issues": [
       {
         "anchorId": "anc-c1-4f21",
         "clauseId": "c1",
         "severity": "HIGH",
         "category": "合作范围",
         "finding": "合作范围描述不够明确",
         "suggestion": "建议明确列举具体的合作项目和范围边界"
       }
     ]
   }
   ```
4. 选择锚点定位策略:
   - 优先锚点,否则条款ID (推荐)
   - 仅使用锚点
   - 允许文本匹配
5. 可选: 勾选 "批注完成后清理锚点"
6. 点击 "✨ 开始批注" 按钮
7. 等待处理,带批注的文档会自动下载

**批注效果:**
在合同相应位置插入红色斜体文本:
```
【AI审查批注】[高风险] 合作范围问题：
合作范围描述不够明确。
建议：建议明确列举具体的合作项目和范围边界
```

## 特色功能

### 🎨 拖拽上传
- 可以直接将文件拖拽到功能面板中
- 系统自动识别文件格式
- 拖拽时面板会高亮显示

### 📋 一键复制
- 解析结果可一键复制到剪贴板
- 方便粘贴到其他工具或LLM

### 💬 实时提示
- 右上角显示操作提示消息
- 成功/错误/警告不同颜色区分
- 3秒后自动消失

### ⏳ 加载动画
- 处理过程显示旋转加载动画
- 提示用户耐心等待

## 配合LLM使用

### 完整工作流示例:

1. **解析合同**
   - 上传合同 → 选择"生成锚点" → 选择"JSON结果"
   - 点击解析,获得JSON

2. **LLM审查**
   - 复制JSON结果
   - 提交给Coze/ChatGPT等LLM
   - Prompt示例:
     ```
     请根据以下合同条款进行法律风险审查,
     返回JSON格式的审查结果,包含anchorId、severity、category、finding、suggestion字段。

     合同内容: [粘贴JSON]
     ```

3. **添加批注**
   - 切换到"合同批注"选项卡
   - 上传原始合同
   - 粘贴LLM返回的审查JSON
   - 点击批注,下载带批注的文档

4. **查看结果**
   - 在Word中打开下载的文档
   - 查看AI插入的红色批注

## 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Edge 90+
- ✅ Safari 14+

## 常见问题

**Q: 为什么上传文件后没有反应?**
A: 请检查浏览器控制台(F12),确认后端服务正常运行。

**Q: 批注功能报错 "无法找到批注位置"**
A: 确保上传的文件是解析时生成的带锚点文档,或审查JSON中的clauseId正确。

**Q: 可以处理多大的文件?**
A: 系统限制单个文件最大50MB。

**Q: 支持手机访问吗?**
A: 支持,界面采用响应式设计,手机上也能正常使用。

## 技术实现

- 纯前端实现,无需任何框架
- 使用 Fetch API 进行文件上传
- FormData 实现多文件和参数组合上传
- Blob + URL.createObjectURL 实现文件下载
- CSS3 渐变和动画增强视觉效果

## 安全说明

- 所有文件处理都在服务器端完成
- 不存储任何上传的文件
- 无需登录,无需注册
- 适合内网部署使用
