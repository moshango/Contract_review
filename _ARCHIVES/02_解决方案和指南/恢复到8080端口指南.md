# åˆåŒå®¡æŸ¥ç³»ç»Ÿ - æ¢å¤åˆ°8080ç«¯å£æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

- âœ… **è¯Šæ–­ä»£ç å·²æˆåŠŸç¼–è¯‘å¹¶éƒ¨ç½²**
- âœ… **ç«¯åˆ°ç«¯æµ‹è¯•å·²éªŒè¯å®Œæˆ**
- âš ï¸ **åº”ç”¨å½“å‰è¿è¡Œåœ¨ç«¯å£ 9999**ï¼ˆç”±äºMINGW64ç¯å¢ƒé™åˆ¶ï¼‰
- ğŸ”’ **zombieè¿›ç¨‹å ç”¨äº†8080å’Œ9999ç«¯å£**

## ğŸ”§ æ¢å¤æ­¥éª¤

### æ–¹æ¡ˆ1: ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæ¨èï¼‰

**åœ¨é¡¹ç›®ç›®å½•ä¸­åŒå‡»è¿è¡Œï¼š**
```
æ¢å¤åˆ°8080.bat
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. å…³é—­æ‰€æœ‰Javaè¿›ç¨‹
2. éªŒè¯å¹¶é‡Šæ”¾ç«¯å£
3. å¯åŠ¨åº”ç”¨åˆ°8080

---

### æ–¹æ¡ˆ2: æ‰‹åŠ¨æ¢å¤ï¼ˆå¦‚æœè„šæœ¬å¤±è´¥ï¼‰

#### æ­¥éª¤1: å…³é—­æ‰€æœ‰Javaè¿›ç¨‹

æ‰“å¼€ **å‘½ä»¤æç¤ºç¬¦ (CMD)** æˆ– **PowerShell**ï¼Œæ‰§è¡Œï¼š

```cmd
taskkill /F /IM java.exe
```

#### æ­¥éª¤2: éªŒè¯ç«¯å£å·²é‡Šæ”¾

```cmd
netstat -ano | findstr "8080"
netstat -ano | findstr "9999"
```

å¦‚æœæ˜¾ç¤ºç©ºç»“æœï¼Œè¯´æ˜ç«¯å£å·²é‡Šæ”¾ã€‚

#### æ­¥éª¤3: å¯åŠ¨åº”ç”¨åˆ°8080

åœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œï¼š

```cmd
# æ–¹æ¡ˆA: ä½¿ç”¨ç¼–è¯‘å¥½çš„app.jarï¼ˆåŒ…å«è¯Šæ–­ä»£ç ï¼‰
java -jar target/app.jar

# æˆ–æ–¹æ¡ˆB: é‡æ–°ç¼–è¯‘åå¯åŠ¨
mvn clean package -DskipTests
java -jar target/Contract_review-0.0.1-SNAPSHOT.jar
```

#### æ­¥éª¤4: éªŒè¯å¯åŠ¨æˆåŠŸ

æ‰“å¼€æ–°çš„ **å‘½ä»¤æç¤ºç¬¦** æˆ– **PowerShell**ï¼Œæ‰§è¡Œï¼š

```cmd
# éªŒè¯ç«¯å£
netstat -ano | findstr "8080"

# æˆ–æµ‹è¯•æœåŠ¡
curl http://localhost:8080/chatgpt/generate-prompt -H "GET"
```

---

## âœ… éªŒè¯åº”ç”¨å°±ç»ª

### æµ‹è¯•Parseç«¯ç‚¹ï¼ˆæ­¥éª¤1ï¼‰

```bash
curl -X POST http://localhost:8080/chatgpt/generate-prompt \
  -F "file=@æµ‹è¯•åˆåŒ_ç»¼åˆæµ‹è¯•ç‰ˆ.docx"
```

**é¢„æœŸå“åº”ï¼š**
- HTTP 200
- è¿”å›parseResultIdå’Œ23ä¸ªæ¡æ¬¾
- JSONæ ¼å¼æ­£å¸¸

### æµ‹è¯•Annotateç«¯ç‚¹ï¼ˆæ­¥éª¤2ï¼‰

ä½¿ç”¨ä»Parseè¿”å›çš„parseResultIdï¼š

```bash
curl -X POST "http://localhost:8080/chatgpt/import-result-xml?parseResultId=<ä»Parseè·å¾—çš„ID>" \
  --data-urlencode chatgptResponse@review.json \
  -o annotated.docx
```

**é¢„æœŸç»“æœï¼š**
- HTTP 200
- è¿”å›35-40KBçš„DOCXæ–‡ä»¶
- åŒ…å«comments.xmlå’Œæ‰¹æ³¨å†…å®¹

---

## ğŸ¯ ç¡®è®¤å·¥ä½œæµå®Œæˆ

æˆåŠŸå¯åŠ¨åï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š

```
2025-10-21 17:41:16 [main] INFO  c.e.C.ContractReviewApplication - Started ContractReviewApplication in X.XXX seconds
```

ä»¥åŠå¯ç”¨çš„ç«¯ç‚¹ï¼š
- `POST /chatgpt/generate-prompt` - è§£æåˆåŒå¹¶ç”Ÿæˆé”šç‚¹
- `POST /chatgpt/import-result-xml` - æ‰¹æ³¨æ–‡æ¡£

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1: "Address already in use"ï¼ˆç«¯å£è¢«å ç”¨ï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**
```cmd
# æŸ¥æ‰¾å ç”¨8080çš„è¿›ç¨‹
netstat -ano | findstr "8080"

# å¼ºåˆ¶å…³é—­è¯¥è¿›ç¨‹ï¼ˆæ›¿æ¢<PID>ä¸ºå®é™…çš„è¿›ç¨‹IDï¼‰
taskkill /PID <PID> /F

# å†æ¬¡å¯åŠ¨åº”ç”¨
java -jar target/app.jar
```

### é—®é¢˜2: "Cannot find JAR file"ï¼ˆæ‰¾ä¸åˆ°JARï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**
```cmd
# é‡æ–°ç¼–è¯‘
mvn clean package -DskipTests

# ç­‰å¾…ç¼–è¯‘å®Œæˆåå¯åŠ¨
java -jar target/Contract_review-0.0.1-SNAPSHOT.jar
```

### é—®é¢˜3: åº”ç”¨å¯åŠ¨å¤±è´¥

æŸ¥çœ‹å®Œæ•´æ—¥å¿—ï¼š
```cmd
# Windows
type logs\spring.log

# æˆ–é‡æ–°å¯åŠ¨å¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
java -jar target/app.jar
```

---

## ğŸ“Š å…³é”®æˆå°±æ€»ç»“

âœ… **æ¶æ„éªŒè¯**
- Parse â†’ Cache â†’ Annotate å®Œæ•´å·¥ä½œæµå·²éªŒè¯
- é”šç‚¹ç²¾ç¡®å®šä½æœºåˆ¶å·²ç¡®è®¤å¯ç”¨
- æ‰¹æ³¨æ’å…¥åŠŸèƒ½å·²æˆåŠŸæµ‹è¯•

âœ… **ä»£ç è´¨é‡**
- æ·»åŠ äº†å®Œæ•´çš„è¯Šæ–­æ—¥å¿—
- æ”¯æŒEXACT/CONTAINS/REGEXä¸‰ç§åŒ¹é…æ¨¡å¼
- æ”¯æŒpreferAnchor/anchorOnly/textFallbackç­–ç•¥

âœ… **ç”Ÿäº§å°±ç»ª**
- å·²ç”ŸæˆåŒ…å«è¯Šæ–­ä»£ç çš„å¯æ‰§è¡ŒJAR
- é…ç½®æ–‡ä»¶å·²æ¢å¤åˆ°æ ‡å‡†ç«¯å£8080
- åº”ç”¨å¯ç«‹å³éƒ¨ç½²ä½¿ç”¨

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼Œè¯·ï¼š

1. æ£€æŸ¥é¡¹ç›®æ ¹ç›®å½•çš„æ—¥å¿—æ–‡ä»¶
2. ç¡®è®¤Javaç‰ˆæœ¬ï¼š`java -version`
3. ç¡®è®¤Mavenç‰ˆæœ¬ï¼š`mvn -version`
4. æŸ¥çœ‹å®Œæ•´æ„å»ºæ—¥å¿—ï¼š`mvn clean package -DskipTests -X`

