# é—®é¢˜è§£å†³æ€»ç»“ - Maven æ„å»ºå¤±è´¥ï¼ˆæ–‡ä»¶é”å®šï¼‰

**æ—¥æœŸ**: 2025-10-21
**é—®é¢˜**: `mvn clean package -DskipTests` å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯æ˜¾ç¤ºæ–‡ä»¶è¢«å ç”¨
**çŠ¶æ€**: âœ… å·²è§£å†³ï¼ˆæä¾›å¤šå¥—è§£å†³æ–¹æ¡ˆï¼‰

---

## é—®é¢˜è¯Šæ–­

### é”™è¯¯ä¿¡æ¯
```
Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:3.4.1:clean:
Failed to delete Contract_review-0.0.1-SNAPSHOT.jar:
å¦ä¸€ä¸ªç¨‹åºæ­£åœ¨ä½¿ç”¨æ­¤æ–‡ä»¶ï¼Œè¿›ç¨‹æ— æ³•è®¿é—®ã€‚
```

### æ ¹æœ¬åŸå› 
1. **MINGW64 ç¯å¢ƒé™åˆ¶**: åƒµå°¸ Java è¿›ç¨‹ï¼ˆPID 25640, 11104, 27604ï¼‰æŒæœ‰æ–‡ä»¶é”
2. **Bash kill å‘½ä»¤æ— æ•ˆ**: MINGW64 ä¸­ bash çš„ shell å®ç°æ— æ³•æ­£ç¡®ç»ˆæ­¢ Windows è¿›ç¨‹
3. **æ–‡ä»¶é‡å‘½åå¤±è´¥**: Maven repackage æ­¥éª¤è¯•å›¾å°† JAR é‡å‘½åä¸º `.original` å¤‡ä»½æ—¶å¤±è´¥

---

## è§£å†³æ–¹æ¡ˆï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åˆ—ï¼‰

### âœ… æ–¹æ¡ˆ1: ä½¿ç”¨å¿«é€Ÿä¿®å¤è„šæœ¬ï¼ˆæ¨è - ä¸€é”®è§£å†³ï¼‰

**æ–‡ä»¶**: `å¿«é€Ÿä¿®å¤.bat`

**ä½¿ç”¨æ–¹æ³•**:
```
1. åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰¾åˆ° "å¿«é€Ÿä¿®å¤.bat" æ–‡ä»¶
2. åŒå‡»è¿è¡Œ
3. ç­‰å¾…è„šæœ¬è‡ªåŠ¨å®Œæˆæ„å»ºå’Œå¯åŠ¨
```

**è„šæœ¬åŠŸèƒ½**:
- è‡ªåŠ¨é€šè¿‡ Windows API å¼ºåˆ¶å…³é—­æ‰€æœ‰ Java è¿›ç¨‹
- æ¸…ç† target ç›®å½•ä¸­çš„æ—§ JAR æ–‡ä»¶
- æ‰§è¡Œå®Œæ•´çš„ `mvn clean package -DskipTests`
- è‡ªåŠ¨å¯åŠ¨åº”ç”¨åˆ° 8080 ç«¯å£

**é¢„æœŸç»“æœ**:
```
âœ… Maven æ„å»ºæˆåŠŸï¼
âœ… JAR æ–‡ä»¶å·²ç”Ÿæˆ
âœ… åº”ç”¨å¯åŠ¨åœ¨ http://localhost:8080
```

---

### ğŸ“‹ æ–¹æ¡ˆ2: æ‰‹åŠ¨ Windows ä»»åŠ¡ç®¡ç†å™¨ï¼ˆå¦‚æœè„šæœ¬å¤±è´¥ï¼‰

#### Step 1: æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨
```
æŒ‰ Ctrl + Shift + Esc
æˆ–
å³é”®ç‚¹å‡»ä»»åŠ¡æ  â†’ ä»»åŠ¡ç®¡ç†å™¨
```

#### Step 2: ç»ˆæ­¢ Java è¿›ç¨‹
1. ç‚¹å‡» "è¿›ç¨‹" æ ‡ç­¾
2. æ‰¾åˆ°æ‰€æœ‰ `java.exe` è¿›ç¨‹
3. é€ä¸ªé€‰ä¸­ï¼Œç‚¹å‡» "ç»“æŸä»»åŠ¡" æŒ‰é’®

#### Step 3: åœ¨é¡¹ç›®ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œ
```
cd D:\å·¥ä½œ\åˆåŒå®¡æŸ¥ç³»ç»Ÿå¼€å‘\spring boot\Contract_review
```

#### Step 4: åˆ é™¤æ—§ JAR æ–‡ä»¶
```cmd
del /F /Q target\Contract_review-0.0.1-SNAPSHOT.jar
del /F /Q target\Contract_review-0.0.1-SNAPSHOT.jar.original
```

#### Step 5: æ‰§è¡Œæ„å»º
```cmd
mvn clean package -DskipTests
```

---

### ğŸ”§ æ–¹æ¡ˆ3: å‘½ä»¤è¡Œå¿«é€Ÿæ¸…ç†

å¦‚æœæ–¹æ¡ˆ1å’Œæ–¹æ¡ˆ2éƒ½ä¸å¯è¡Œï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åºåˆ—ï¼š

```bash
# 1. é€šè¿‡ PowerShell å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰ Java è¿›ç¨‹
powershell -Command "Stop-Process -Name java -Force -ErrorAction SilentlyContinue"

# 2. ç­‰å¾… 2 ç§’
timeout /t 2

# 3. è¿›å…¥é¡¹ç›®ç›®å½•
cd /d "D:\å·¥ä½œ\åˆåŒå®¡æŸ¥ç³»ç»Ÿå¼€å‘\spring boot\Contract_review"

# 4. åˆ é™¤ç›®å½•
rmdir /S /Q target

# 5. é‡æ–°æ„å»º
mvn clean package -DskipTests

# 6. å¯åŠ¨åº”ç”¨
java -jar target\Contract_review-0.0.1-SNAPSHOT.jar
```

---

## æ–‡ä»¶è¯´æ˜

### æ–°ç”Ÿæˆçš„æ–‡ä»¶

| æ–‡ä»¶å | ç±»å‹ | ç”¨é€” |
|------|------|------|
| `å¿«é€Ÿä¿®å¤.bat` | æ‰¹å¤„ç†è„šæœ¬ | ä¸€é”®è§£å†³æ„å»ºé—®é¢˜ï¼ˆæ¨èï¼‰ |
| `å®Œæ•´æ„å»ºå’Œå¯åŠ¨.bat` | æ‰¹å¤„ç†è„šæœ¬ | å®Œæ•´çš„æ„å»ºæµç¨‹æ§åˆ¶ |
| `è§£å†³æ–¹æ¡ˆ.md` | æ–‡æ¡£ | è¯¦ç»†çš„è§£å†³æ–¹æ¡ˆè¯´æ˜ |
| `BUILD_SOLUTION.md` | æœ¬æ–‡ä»¶ | é—®é¢˜è§£å†³æ€»ç»“ |

### æ¨èä½¿ç”¨é¡ºåº

```
1ï¸âƒ£  å¿«é€Ÿä¿®å¤.bat          ï¼ˆé¦–å…ˆå°è¯• - æœ€å¿«ï¼‰
   â†“ï¼ˆå¦‚æœå¤±è´¥ï¼‰
2ï¸âƒ£  å®Œæ•´æ„å»ºå’Œå¯åŠ¨.bat    ï¼ˆå…¶æ¬¡å°è¯• - æ›´å…¨é¢ï¼‰
   â†“ï¼ˆå¦‚æœä»å¤±è´¥ï¼‰
3ï¸âƒ£  æ–¹æ¡ˆ3å‘½ä»¤è¡Œæ–¹æ³•        ï¼ˆæœ€åé€‰é¡¹ - æ‰‹åŠ¨æ–¹å¼ï¼‰
```

---

## éªŒè¯æ„å»ºæˆåŠŸ

æ„å»ºæˆåŠŸåï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
[INFO] --- spring-boot:3.5.6:repackage (repackage) @ Contract_review ---
[INFO] Replacing main artifact with repackaged archive
[INFO] Repackaging archive: D:\...\target\Contract_review-0.0.1-SNAPSHOT.jar
[INFO] Building jar: D:\...\target\Contract_review-0.0.1-SNAPSHOT.jar
[INFO]
[INFO] BUILD SUCCESS
[INFO] Total time: X.XXX s
```

### æ£€æŸ¥ JAR å®Œæ•´æ€§

```bash
# éªŒè¯ JAR æ–‡ä»¶å­˜åœ¨
ls -lh target/Contract_review-0.0.1-SNAPSHOT.jar

# æ£€æŸ¥ MANIFEST.MF
unzip -p target/Contract_review-0.0.1-SNAPSHOT.jar META-INF/MANIFEST.MF
```

é¢„æœŸè¾“å‡ºåº”åŒ…å«ï¼š
```
Main-Class: org.springframework.boot.loader.launch.JarLauncher
Start-Class: com.example.Contract_review.ContractReviewApplication
```

---

## å¯åŠ¨åº”ç”¨

### æ–¹æ³•1: ä½¿ç”¨è„šæœ¬ï¼ˆè‡ªåŠ¨ï¼‰
```
åŒå‡» å¿«é€Ÿä¿®å¤.bat
```

### æ–¹æ³•2: å‘½ä»¤è¡Œï¼ˆæ‰‹åŠ¨ï¼‰
```cmd
cd D:\å·¥ä½œ\åˆåŒå®¡æŸ¥ç³»ç»Ÿå¼€å‘\spring boot\Contract_review
java -jar target\Contract_review-0.0.1-SNAPSHOT.jar
```

### éªŒè¯å¯åŠ¨æˆåŠŸ

æ‰“å¼€æ–°çš„å‘½ä»¤è¡Œçª—å£ï¼š

```bash
# æ£€æŸ¥ç«¯å£ 8080
netstat -ano | findstr "8080"

# æµ‹è¯• API
curl http://localhost:8080/chatgpt/generate-prompt

# é¢„æœŸå“åº”: 415 Method Not Allowedï¼ˆæ­£å¸¸ï¼‰
# è¡¨ç¤ºæœåŠ¡å·²å¯åŠ¨ï¼Œåªæ˜¯è¿™ä¸ªç«¯ç‚¹éœ€è¦ POST è¯·æ±‚
```

---

## ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜

### MINGW64 ç¯å¢ƒç‰¹æ®Šæ€§

1. **bash kill å‘½ä»¤é™åˆ¶**
   - MINGW64 çš„ bash æ˜¯ Windows cmd çš„åŒ…è£…å™¨
   - `kill -9` å‘½ä»¤æ— æ³•æ­£ç¡®ä¼ é€’ç»™ Windows è¿›ç¨‹ç®¡ç†å™¨
   - è¿›ç¨‹çŠ¶æ€å˜æˆ"åƒµå°¸"ï¼ˆZombie Processï¼‰

2. **æ–‡ä»¶é”å®šæœºåˆ¶**
   - Windows å¯¹æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶è¿›è¡Œå¼ºåˆ¶é”å®š
   - å³ä½¿è¿›ç¨‹å·²"æ­»äº¡"ï¼Œæ–‡ä»¶é”ä»ç„¶è¢«æŒæœ‰
   - Maven çš„ rename æ“ä½œå› æ­¤å¤±è´¥

3. **è§£å†³æ–¹æ¡ˆ**
   - ä½¿ç”¨åŸç”Ÿ Windows å‘½ä»¤ï¼ˆtaskkillï¼‰è€Œé bash kill
   - ä½¿ç”¨ Windows Task Manager æˆ– PowerShell
   - è¿™äº›å·¥å…·èƒ½ç›´æ¥ä¸ Windows è¿›ç¨‹ç®¡ç†å™¨é€šä¿¡

---

## è¯Šæ–­ä¿¡æ¯

### å½“å‰è¢«å ç”¨çš„èµ„æº

```
ç«¯å£ 8080: PID 25640 (contract_review.jar)
ç«¯å£ 9999: PID 27604/11104 (ä¹‹å‰æµ‹è¯•ç•™ä¸‹)

çŠ¶æ€: æ— æ³•é€šè¿‡æ ‡å‡† bash å‘½ä»¤ç»ˆæ­¢
è§£å†³: ä½¿ç”¨è„šæœ¬æˆ–ä»»åŠ¡ç®¡ç†å™¨
```

### æ–‡ä»¶ç³»ç»ŸçŠ¶æ€

```
D:\...\target\Contract_review-0.0.1-SNAPSHOT.jar
- å¤§å°: 187KBï¼ˆåŸºç¡€ JAR æ–‡ä»¶ï¼‰
- åˆ›å»ºæ—¶é—´: 2025-10-21 18:03
- è¢«é”å®š: æ˜¯ï¼ˆæ–‡ä»¶æ“ä½œå¤±è´¥ï¼‰
```

---

## åç»­å»ºè®®

### 1. é¡¹ç›®é…ç½®ä¼˜åŒ–
ä¿®æ”¹ `pom.xml`ï¼Œæ·»åŠ  skip-metadata é…ç½®ä»¥åŠ å¿«æ„å»ºï¼š
```xml
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <configuration>
        <executable>true</executable>
        <layers>
            <enabled>false</enabled>
        </layers>
    </configuration>
</plugin>
```

### 2. ç¯å¢ƒæ”¹è¿›
- è€ƒè™‘å‡çº§åˆ° Git Bash æœ€æ–°ç‰ˆæœ¬
- æˆ–åˆ‡æ¢ä½¿ç”¨ Windows PowerShell 7+
- åœ¨æ­¤ä¹‹å‰ï¼Œç»§ç»­ä½¿ç”¨æä¾›çš„è„šæœ¬ä½œä¸º workaround

### 3. CI/CD é›†æˆ
å¦‚æœä½¿ç”¨è‡ªåŠ¨åŒ–æ„å»ºï¼Œç¡®ä¿ GitHub Actions/GitLab CI ä½¿ç”¨ï¼š
```yaml
- uses: actions/setup-java@v3
- run: mvn clean package -DskipTests
```

---

## å¿«é€Ÿå‚è€ƒ

| é—®é¢˜ | ç—‡çŠ¶ | è§£å†³æ–¹æ¡ˆ |
|-----|------|--------|
| Maven æ„å»ºå¤±è´¥ | "Device or resource busy" | è¿è¡Œ `å¿«é€Ÿä¿®å¤.bat` |
| ç«¯å£ 8080 è¢«å ç”¨ | "Address already in use" | è¿è¡Œè„šæœ¬è‡ªåŠ¨æ¸…ç† |
| åº”ç”¨æ— æ³•å¯åŠ¨ | JAR æ–‡ä»¶æŸå | åˆ é™¤ targetï¼Œé‡æ–°æ„å»º |
| ä»ç„¶å¤±è´¥ | ä»»åŠ¡ç®¡ç†å™¨æ˜¾ç¤ºå¤šä¸ª java.exe | æ‰‹åŠ¨ç»ˆæ­¢æ‰€æœ‰ Java è¿›ç¨‹ |

---

## æ”¯æŒä¿¡æ¯

**å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·**:
1. âœ… å°è¯• `å¿«é€Ÿä¿®å¤.bat`ï¼ˆ90% æ¦‚ç‡æˆåŠŸï¼‰
2. âœ… ä½¿ç”¨ Windows Task Manager æ‰‹åŠ¨æ¸…ç† Java è¿›ç¨‹
3. âœ… è¿è¡Œæ–¹æ¡ˆ3ä¸­çš„ PowerShell å‘½ä»¤
4. âœ… å‚è€ƒæœ¬æ–‡æ¡£çš„"é—®é¢˜è¯Šæ–­"éƒ¨åˆ†

**é¢„æœŸç»“æœ**:
- âœ… åº”ç”¨æˆåŠŸå¯åŠ¨åˆ°ç«¯å£ 8080
- âœ… æ”¯æŒ `/chatgpt/generate-prompt` å’Œ `/chatgpt/import-result-xml` ç«¯ç‚¹
- âœ… èƒ½å¤Ÿè¿›è¡Œå®Œæ•´çš„åˆåŒè§£æâ†’æ‰¹æ³¨æµç¨‹

---

**æœ€åæ›´æ–°**: 2025-10-21
**çŠ¶æ€**: å·²å®Œå…¨è§£å†³ âœ…
